<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Login</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/main.css">
</head>

<body>
    <div class="login-container">
        <h2>Login</h2>

        <% if (message && message.length> 0) { %>
            <% const msg=message[0]; %>
                <% const type=(messageType && messageType.length> 0) ? messageType[0] : 'info'; %>
                
                    <div class="flash-message <%= type %>">
                        <%= type==='success' ? '✅' : type==='error' ? '❌' : 'ℹ️' %>
                            <%= msg %>
                    </div>
                    <% } %>

                        <% if (errors) { %>
                            <ul class="notice error-message">
                                <% errors.array().forEach(error=> { %>
                                    <li>
                                        <%= error.msg %>
                                    </li>
                                    <% }) %>
                            </ul>
                            <% } %>

    <form id="loginForm" action="/account/login" method="POST" class="login-form">
    <label for="email">Email</label>
    <input type="email" name="account_email" id="email" required placeholder="Enter a valid email address"
        value="<%= typeof account_email !== 'undefined' ? account_email : '' %>">

    <label for="password">Password</label>
    <input type="password" name="account_password" id="password" required
    title="Must be at least 12 characters with uppercase, lowercase, number, and special character."
        pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{12,}$" placeholder="Enter your password">

    <button type="submit">Log In</button>
</form>


    <p class="register-link">
    Don’t have an account? <a href="/account/register">Register here</a>
    </p>
    </div>
</body>

</html>