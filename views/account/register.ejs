<main>
    <div class="login-container">
        <h2>Register</h2>

    <% const msg=(message && message.length> 0) ? message[0] : null; %>
        <% const type=(messageType && messageType.length> 0) ? messageType[0] : 'info'; %>
    
            <% if (msg) { %>
                <div class="flash-message <%= type %>">
                    <%= type==='success' ? '✅' : type==='error' ? '❌' : 'ℹ️' %>
                        <%= msg %>
                </div>
                <% } %>



                    <% if (message && message.length> 0) { %>
                        <ul class="notice error-message">
                            <% message.forEach(msg=> { %>
                                <li>
                                    <%= msg %>
                                </li>
                                <% }) %>
                        </ul>
                        <% } %>


              

                    <form class="login-form" action="/account/register" method="POST">
                        <p class="required-note">
                            Fields marked with <span class="required-star">*</span> are required.
                        </p>

                        <label for="firstname">First Name <span class="required-star">*</span></label>
                        <input type="text" id="firstname" name="account_firstname" required>

                        <label for="lastname">Last Name <span class="required-star">*</span></label>
                        <input type="text" id="lastname" name="account_lastname" required>

                        <label for="email">Email <span class="required-star">*</span></label>
                        <input type="email" id="email" name="account_email" required
                        placeholder="Enter a valid email address">

                        <label for="password">Password <span class="required-star">*</span></label>
                        <div class="password-wrapper">
                            <input type="password" id="password" name="account_password" required
                            pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{12,}$">
                            <button type="button" id="togglePassword">Show</button>
                        </div>
                        <div class="password-note">
                            Password must be at least 12 characters, contain 1 uppercase letter, 1 number, and 1 special
                            character.
                            <!-- <span>Passwords must be at least 12 characters and contain at least 1 number, 1 capital letter and 1 special character</span>  -->
                        </div>

                        <button type="submit">Register</button>
                    </form>

                    <div class="register-link">
                        Already have an account? <a href="/account/login">Login</a>
                    </div>
    </div>
</main>

<script>
    const toggleBtn = document.getElementById('togglePassword');
    const passwordInput = document.getElementById('password');

    toggleBtn.addEventListener('click', () => {
        const isHidden = passwordInput.type === 'password';
        passwordInput.type = isHidden ? 'text' : 'password';
        toggleBtn.textContent = isHidden ? 'Hide' : 'Show';
    });
</script>